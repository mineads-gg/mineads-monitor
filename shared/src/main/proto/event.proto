syntax = "proto3";

option java_package = "gg.mineads.monitor.shared.event.generated";
option java_multiple_files = true;
option go_package = "./generated";

package mineadsmonitor.v1;

// LuckPerms data
message LuckPermsData {
  repeated string groups = 1;
}

// Player join data
message PlayerJoinData {
  string session_id = 1;
  string uuid = 2;
  string username = 3;
  optional string host = 5;
  optional int32 protocol_version = 7;
  optional bool online_mode = 8;
  optional LuckPermsData luckperms_data = 9;
  optional string virtual_host = 10;
  optional string skin_texture_hash = 11;
  optional string cape_texture_hash = 12;
  optional string skin_type = 13;
}

// Player leave data
message PlayerLeaveData {
  string session_id = 1;
}

// Player heartbeat data
message PlayerHeartbeatData {
  repeated string session_ids = 1;
}

// Player chat data
message PlayerChatData {
  string session_id = 1;
  optional string message = 2;
}

// Player command data
message PlayerCommandData {
  string session_id = 1;
  repeated string arguments = 2;
  bool is_truncated = 3;
}

message PlayerSettingsData {
  string session_id = 1;
  optional string locale = 2;
  optional int32 view_distance = 3;
  optional string chat_mode = 4;
  optional bool chat_colors = 5;
  optional string main_hand = 6;
  optional bool text_filtering_enabled = 7;
  optional bool allows_server_listings = 8;
}

message PlayerClientBrandData {
  string session_id = 1;
  optional string client_brand = 2;
}

// Transaction data
message TransactionData {
  string transaction_id = 1;
  string username = 2;
  string uuid = 3;
  string package_name = 4;
  double price = 5;
  string currency = 6;
}

// Main event message
message MineAdsEvent {
  int64 time = 2;

  oneof data {
    PlayerJoinData join_data = 3;
    PlayerLeaveData leave_data = 4;
    PlayerChatData chat_data = 5;
    PlayerCommandData command_data = 6;
    PlayerHeartbeatData heartbeat_data = 8;
    PlayerSettingsData settings_data = 9;
    PlayerClientBrandData client_brand_data = 10;
    TransactionData initial_transaction_data = 11;
    TransactionData expiry_transaction_data = 12;
    TransactionData renewal_transaction_data = 13;
    TransactionData chargeback_transaction_data = 14;
    TransactionData refund_transaction_data = 15;
  }
}

// Batch of events
message EventBatch {
  repeated MineAdsEvent events = 1;
  string server_id = 2;
}
